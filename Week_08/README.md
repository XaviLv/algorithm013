# 学习笔记 / week08

|Time|Version|Note|
|---|---|---|
|09/16|0.0.1|draft|

</br>


## 位运算

- 52. N皇后 II

**总体思想：**

用整数记录每一行哪些位置已被占用，注意递归时每一层只专注于当层数据的处理。
整数：cols, pie, na，用bit位表示哪些位被占用

**思考拐点**

我在做题的时候有几个地方理解了半天，分享一下：

1. `~(cols | pie | na) & ((1 << n) - 1)` 这一段有两个含义，前半部分先对 cols、pie、na **或**运算拿到当前层所有不可放置的位置（列），然后取反获得当前层所有可放置的位置，后半部分结合**与**操作就是将 32 位（or 64位）整形截断保留最低 n 位。

2. DFS drill down 时，为什么 `(pie | p) << 1`？因为每下探一层，pie占领的格子（列）就左移一位。同理，`(na | p) >> 1)`表示每下探一层，na占领的格子（列）就右移一位。画个图就清楚了。


**XOR 异或**

```python
x ^ 0 = x
x ^ ~0 = ~x  # ~0 代表全 1
x ^ ~x = ~0
x ^ x = 0
```

**指定位置的位运算**

```python
# x 最右边的 n 位清零
x & (~0 << n)
# 获取 x 的第 n 位的值（0 或 1）
(x >> n) & 1
# 获取 x 的第 n 位幂值
x & (1 << n)
# 仅将第 n 位置为 1
x | (1 << n)
# 仅将第 n 位置为 0
x & (~(1 << n))
# 将 x 的最高位至（含）第 n 位清零
x & ((1 << n) - 1)
```

**实战位运算要点**

```python
# 判断奇偶
x & 1 == 1 # odd
x & 1 == 0 # oven
# 二分
mid = (left + right) >> 1 = left + (right - left) >> 1
# 清零最低位的 1（注意：这里最低位的1不是说最右边的位置，而是从右往左数遇到的第一个1的位置）
x = x & (x - 1)
# 得到最低位的 1; -x = ~x + 1
x = x & -x
# 得到最低位的 0
x = x & ~x
```